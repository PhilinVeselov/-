# План по разделению amoCRM (Kommo CRM) на микросервисы

## Описание текущего приложения

amoCRM (Kommo CRM) — это CRM-система для управления продажами, включающая в себя следующие основные модули:
- **Управление сделками**: ведение воронки продаж и отслеживание стадий сделок.
- **Контакты и лиды**: база данных клиентов с возможностью сегментации и отслеживания истории взаимодействий.
- **Автоматизация**: роботы и сценарии для автоматизации задач, таких как отправка уведомлений.
- **Аналитика и отчеты**: аналитические отчеты для отслеживания эффективности.
- **Интеграции с мессенджерами**: возможность подключения к мессенджерам (WhatsApp, Telegram, Instagram) для интеграции коммуникаций.

## Проблемы масштабируемости и узкие места

1. **Модуль сделок**: обработка большого количества данных в одной базе при множестве пользователей может снизить производительность.
2. **Автоматизация**: высокий объем задач по автоматизации (роботы, сценарии) нагружает сервер.
3. **Интеграции с мессенджерами**: частая отправка уведомлений и сообщений приводит к задержкам и увеличению нагрузки.

## План разделения на модули и сервисы

### 1. Сервис сделок
   - **Описание**: обрабатывает все операции, связанные с управлением сделками.
   - **Взаимодействие**: REST API для взаимодействия с другими сервисами, например, с сервисом аналитики.

### 2. Сервис контактов и лидов
   - **Описание**: управляет контактами и лидерами, обеспечивает хранение и доступ к клиентским данным.
   - **Взаимодействие**: REST API для предоставления данных о клиентах.

### 3. Сервис автоматизации
   - **Описание**: обрабатывает задачи автоматизации, такие как сценарии и роботы для обработки сделок и уведомлений.
   - **Взаимодействие**: использует очереди сообщений (например, RabbitMQ) для обработки задач в асинхронном режиме.

### 4. Сервис уведомлений и интеграций
   - **Описание**: обрабатывает все уведомления и взаимодействия с внешними мессенджерами.
   - **Взаимодействие**: подключен к внешним API мессенджеров и обрабатывает все запросы, используя кэширование для уменьшения нагрузки.

## Стратегия миграции

1. **Выделение и перенос данных**: перенос данных по сделкам, контактам, автоматизации в отдельные базы данных для каждого сервиса.
2. **Пошаговая миграция**: постепенный перенос функций, начиная с наименее критичных (например, уведомления), и проверка взаимодействия между сервисами.
3. **Тестирование**: после каждого этапа миграции проводить нагрузочное тестирование.


